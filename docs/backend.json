
{
  "entities": {
    "TravelPackage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TravelPackage",
      "type": "object",
      "description": "Represents a travel package offered by the agency.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the travel package."
        },
        "title": {
          "type": "string",
          "description": "Title of the travel package."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the travel package itinerary."
        },
        "price": {
          "type": "number",
          "description": "Price of the travel package."
        },
        "image": {
          "type": "string",
          "description": "URL of an image showcasing the travel package.",
          "format": "uri"
        },
        "duration": {
          "type": "string",
          "description": "Duration of the travel package (e.g., '7 days', '2 weeks')."
        },
        "location": {
          "type": "object",
          "properties": {
            "lat": { "type": "number" },
            "lng": { "type": "number" }
          }
        },
        "category": {
          "type": "string",
          "enum": ["Luxury", "Comfort", "Adventure", "Family", "Honeymoon", "Cultural", "Budget", "Romantic"]
        },
        "inclusions": {
          "type": "array",
          "items": { "type": "string" }
        },
        "exclusions": {
          "type": "array",
          "items": { "type": "string" }
        },
        "itinerary": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "day": { "type": "number" },
              "title": { "type": "string" },
              "description": { "type": "string" }
            },
            "required": ["day", "title", "description"]
          }
        }
      },
      "required": ["title", "description", "price", "image", "duration", "location", "category"]
    },
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a submission from the 'Contact Us' form.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact form submission."
        },
        "name": {
          "type": "string",
          "description": "Name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "Email address of the person submitting the form.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the person submitting the form."
        },
        "message": {
          "type": "string",
          "description": "Message content from the contact form."
        },
        "submittedAt": {
          "type": "string",
          "description": "Timestamp of when the form was submitted.",
          "format": "date-time"
        },
        "travelers": {
          "type": "number",
          "description": "Number of people traveling."
        },
        "travelDates": {
          "type": "string",
          "description": "Preferred travel dates."
        },
        "budget": {
          "type": "string",
          "description": "Budget per person."
        },
        "interests": {
          "type": "string",
          "description": "User's travel interests."
        },
        "sourcePackage": {
          "type": "string",
          "description": "The travel package the user was viewing when they submitted the form."
        },
        "status": {
          "type": "string",
          "enum": ["Pending", "Confirmed", "Canceled"],
          "description": "The current status of the submission."
        }
      },
      "required": [
        "name",
        "email",
        "message",
        "submittedAt",
        "status"
      ]
    },
    "SiteSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SiteSettings",
      "type": "object",
      "description": "Stores global site settings like contact info and social media links.",
      "properties": {
        "address": {
          "type": "string"
        },
        "phone": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "defaultCurrency": {
            "type": "string",
            "enum": ["AED", "USD", "EUR", "GBP"],
            "description": "The default currency for the entire site."
        },
        "twitterUrl": {
          "type": "string",
          "format": "uri"
        },
        "instagramUrl": {
          "type": "string",
          "format": "uri"
        },
        "facebookUrl": {
          "type": "string",
          "format": "uri"
        },
        "linkedinUrl": {
          "type": "string",
          "format": "uri"
        },
        "youtubeUrl": {
          "type": "string",
          "format": "uri"
        },
        "pinterestUrl": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": ["address", "phone", "email", "defaultCurrency"]
    },
    "HeroSlide": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HeroSlide",
      "type": "object",
      "description": "Represents a single slide in the homepage hero carousel.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the hero slide."
        },
        "title": {
          "type": "string",
          "description": "The main headline for the slide."
        },
        "description": {
          "type": "string",
          "description": "The subtext or description for the slide."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the background image for the slide.",
          "format": "uri"
        }
      },
      "required": ["title", "description", "imageUrl"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/travelPackages/{travelPackageId}",
        "definition": {
          "entityName": "TravelPackage",
          "schema": {
            "$ref": "#/backend/entities/TravelPackage"
          },
          "description": "Stores travel package information. Accessible to all users (public data).",
          "params": [
            {
              "name": "travelPackageId",
              "description": "Unique identifier for the travel package."
            }
          ]
        }
      },
      {
        "path": "/contactFormSubmissions/{contactFormSubmissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions. Accessible only to authenticated administrators.",
          "params": [
            {
              "name": "contactFormSubmissionId",
              "description": "Unique identifier for the contact form submission."
            }
          ]
        }
      },
      {
        "path": "/siteSettings/main",
        "definition": {
            "entityName": "SiteSettings",
            "schema": { "$ref": "#/backend/entities/SiteSettings" },
            "description": "Stores the main site settings as a single document. Publicly readable."
        }
      },
      {
        "path": "/heroSlides/{heroSlideId}",
        "definition": {
          "entityName": "HeroSlide",
          "schema": {
            "$ref": "#/backend/entities/HeroSlide"
          },
          "description": "Stores content for the homepage hero carousel slides. Publicly readable.",
           "params": [
            {
              "name": "heroSlideId",
              "description": "Unique identifier for the slide."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the VoyageVista travel agency application, focusing on showcasing travel packages and handling contact form submissions. Authorization independence is achieved by not requiring any `get()` calls in the security rules, which is naturally achieved since no user specific private data is stored.\n\n1.  **Travel Packages:** The `travelPackages` collection stores the travel package entities. List operations are inherently secure, since no private or user-specific data is stored in this collection. Any user can read any document in the collection, fulfilling the application requirements.\n\n2.  **Contact Form Submissions:** The `contactFormSubmissions` collection stores contact form submissions.  The security rules allow only authenticated admins to read contact form submissions, maintaining data privacy.  The structure segregates data based on access requirements, simplifying security rules. List operations are secured via authentication.\n\n3. **Site Settings:** The `siteSettings` collection holds a single document 'main' for global configurations like contact info. This data is public and readable by anyone, but writable only by authenticated admins.\n\n4. **Hero Slides**: The `heroSlides` collection stores the content for the homepage carousel. This data is publicly readable by all users to display on the homepage, and writable only by authenticated admins to allow for content management."
  }
}

    