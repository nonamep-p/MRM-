rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to travel packages. Only admins can modify packages.
     * @path /travelPackages/{travelPackageId}
     * @allow (get, list): Any user can read travel package information.
     * @allow (create, update, delete): Only authenticated admins can modify travel packages.
     * @deny create, update, delete: if !isSignedIn();
     * @principle Allows public read access with restricted writes.
     */
    match /travelPackages/{travelPackageId} {
      allow get, list: if true;
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows public read access to package availability. Only admins can modify availability.
     * @path /packageAvailability/{availabilityId}
     * @allow (get, list): Any user can read package availability information.
     * @allow (create, update, delete): Only authenticated admins can modify availability.
     * @deny create, update, delete: if !isSignedIn();
     * @principle Allows public read access with restricted writes.
     */
    match /packageAvailability/{availabilityId} {
      allow get, list: if true;
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Only authenticated admins can read, create, update, or delete contact form submissions.
     * @path /contactFormSubmissions/{contactFormSubmissionId}
     * @allow get, list, create, update, delete: if isSignedIn();
     * @deny get, list, create, update, delete: if !isSignedIn();
     * @principle Restricts all access to contact form submissions to authenticated admins.
     */
    match /contactFormSubmissions/{contactFormSubmissionId} {
      allow get, list, create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows public read access to site settings. Only admins can modify site settings.
     * @path /siteSettings/main
     * @allow get: Site settings are publicly readable.
     * @allow list: if false; // Listing is not intended for this document.
     * @allow create, update, delete: if isSignedIn();
     * @deny create, update, delete: if !isSignedIn();
     * @principle Allows public read access with restricted writes to a single document.
     */
    match /siteSettings/main {
      allow get: if true;
      allow list: if false;
      allow create, update, delete: if isSignedIn();
    }

        /**
         * @description Allows public read access to hero slides. Only admins can modify hero slides.
         * @path /heroSlides/{heroSlideId}
         * @allow (get, list): Any user can read hero slide information.
         * @allow (create, update, delete): Only authenticated admins can modify hero slides.
         * @deny create, update, delete: if !isSignedIn();
         * @principle Allows public read access with restricted writes.
         */
    match /heroSlides/{heroSlideId} {
        allow get, list: if true;
        allow create, update, delete: if isSignedIn();
    }
  }

  function isSignedIn() {
    return request.auth != null;
  }
}